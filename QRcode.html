<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>NetworkVision QR Code Generator</title>
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
      }

      body {
        font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        margin: 0;
        padding: 20px;
        min-height: 100vh;
      }

      .container {
        max-width: 1200px;
        margin: 0 auto;
        background: white;
        border-radius: 15px;
        padding: 30px;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
      }

      h1 {
        text-align: center;
        color: #333;
        margin-bottom: 30px;
        font-size: 2.5em;
      }

      .subtitle {
        text-align: center;
        color: #666;
        margin-bottom: 40px;
        font-size: 1.1em;
      }

      .qr-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: 30px;
        margin-bottom: 40px;
      }

      .qr-card {
        background: #f8f9fa;
        border: 2px solid #e9ecef;
        border-radius: 15px;
        padding: 20px;
        text-align: center;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
      }

      .qr-card:hover {
        transform: translateY(-5px);
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
      }

      .profile-info {
        margin-bottom: 20px;
      }

      .profile-name {
        font-size: 1.3em;
        font-weight: bold;
        color: #333;
        margin-bottom: 5px;
      }

      .profile-title {
        color: #666;
        font-size: 0.95em;
        margin-bottom: 3px;
      }

      .profile-company {
        color: #888;
        font-size: 0.85em;
        margin-bottom: 10px;
      }

      .qr-code-id {
        background: #667eea;
        color: white;
        padding: 5px 10px;
        border-radius: 15px;
        font-size: 0.8em;
        display: inline-block;
        margin-bottom: 20px;
      }

      .qr-placeholder {
        width: 200px;
        height: 200px;
        margin: 0 auto 20px;
        background: white;
        border: 2px dashed #ddd;
        display: flex;
        align-items: center;
        justify-content: center;
        border-radius: 10px;
      }

      .generate-btn {
        background: linear-gradient(135deg, #667eea, #764ba2);
        color: white;
        border: none;
        padding: 12px 25px;
        border-radius: 25px;
        cursor: pointer;
        font-size: 1em;
        font-weight: bold;
        transition: all 0.3s ease;
        margin: 5px;
      }

      .generate-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
      }

      .download-btn {
        background: linear-gradient(135deg, #28a745, #20c997);
        color: white;
        border: none;
        padding: 10px 20px;
        border-radius: 20px;
        cursor: pointer;
        font-size: 0.9em;
        margin: 5px;
        display: none;
      }

      .download-btn:hover {
        background: linear-gradient(135deg, #218838, #1ea080);
      }

      .controls {
        text-align: center;
        margin-bottom: 30px;
      }

      .generate-all-btn {
        background: linear-gradient(135deg, #ff6b6b, #ee5a52);
        color: white;
        border: none;
        padding: 15px 30px;
        border-radius: 30px;
        cursor: pointer;
        font-size: 1.2em;
        font-weight: bold;
        margin: 10px;
        transition: all 0.3s ease;
      }

      .generate-all-btn:hover {
        transform: translateY(-3px);
        box-shadow: 0 8px 20px rgba(255, 107, 107, 0.4);
      }

      .instructions {
        background: #e3f2fd;
        border-left: 4px solid #2196f3;
        padding: 20px;
        margin: 30px 0;
        border-radius: 5px;
      }

      .instructions h3 {
        color: #1976d2;
        margin-top: 0;
      }

      .instructions ol {
        color: #333;
        line-height: 1.6;
      }

      .custom-profile {
        background: #fff3cd;
        border: 2px solid #ffc107;
        border-radius: 10px;
        padding: 20px;
        margin: 20px 0;
      }

      .input-group {
        margin: 10px 0;
      }

      .input-group label {
        display: block;
        margin-bottom: 5px;
        font-weight: bold;
        color: #333;
      }

      .input-group input {
        width: 100%;
        padding: 8px 12px;
        border: 1px solid #ddd;
        border-radius: 5px;
        font-size: 1em;
      }

      .add-custom-btn {
        background: #ffc107;
        color: #333;
        border: none;
        padding: 10px 20px;
        border-radius: 20px;
        cursor: pointer;
        font-weight: bold;
        margin-top: 10px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>ðŸ¤– NetworkVision QR Generator</h1>
      <p class="subtitle">
        Generate QR codes for your AR networking glasses prototype
      </p>

      <div class="instructions">
        <h3>ðŸ“‹ Instructions:</h3>
        <ol>
          <li>
            Click "Generate All QR Codes" to create codes for all default
            profiles
          </li>
          <li>Or generate individual QR codes using the buttons below</li>
          <li>Download each QR code as PDF and print them out</li>
          <li>Give QR codes to your test participants as badges</li>
          <li>
            When scanned by the glasses app, each QR code will show the
            corresponding profile
          </li>
        </ol>
      </div>

      <div class="controls">
        <button class="generate-all-btn" onclick="generateAllQRCodes()">
          ðŸš€ Generate All QR Codes
        </button>
      </div>

      <div class="qr-grid" id="qrGrid">
        <!-- QR codes will be generated here -->
      </div>

      <div class="custom-profile">
        <h3>âž• Add Custom Profile</h3>
        <div class="input-group">
          <label for="customId">Profile ID (for QR code):</label>
          <input type="text" id="customId" placeholder="e.g., prof_smith" />
        </div>
        <div class="input-group">
          <label for="customName">Full Name:</label>
          <input
            type="text"
            id="customName"
            placeholder="e.g., Prof. John Smith"
          />
        </div>
        <div class="input-group">
          <label for="customTitle">Title:</label>
          <input
            type="text"
            id="customTitle"
            placeholder="e.g., Computer Science Professor"
          />
        </div>
        <div class="input-group">
          <label for="customCompany">Company/Institution:</label>
          <input
            type="text"
            id="customCompany"
            placeholder="e.g., University Research Lab"
          />
        </div>
        <button class="add-custom-btn" onclick="addCustomProfile()">
          Add & Generate QR
        </button>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script>
      // Default profiles from the main app
      const profiles = {
        sarah_chen: {
          name: "Dr. Sarah Chen",
          title: "AI Research Director",
          company: "TechFlow Innovations",
        },
        james_wilson: {
          name: "James Wilson",
          title: "Senior Product Manager",
          company: "StartupHub Ventures",
        },
        maria_rodriguez: {
          name: "Maria Rodriguez",
          title: "Cybersecurity Consultant",
          company: "SecureNet Solutions",
        },
        david_kim: {
          name: "David Kim",
          title: "Venture Capital Partner",
          company: "Innovation Capital",
        },
        lisa_thompson: {
          name: "Lisa Thompson",
          title: "UX Design Lead",
          company: "Creative Digital Agency",
        },
        prof_anderson: {
          name: "Prof. Michael Anderson",
          title: "Computer Science Professor",
          company: "University Research Lab",
        },
        startup_founder: {
          name: "Alex Rivera",
          title: "Tech Startup Founder",
          company: "NextGen Solutions",
        },
      };

      function generateAllQRCodes() {
        const grid = document.getElementById("qrGrid");
        grid.innerHTML = "";

        Object.keys(profiles).forEach((profileId) => {
          createQRCard(profileId, profiles[profileId]);
        });
      }

      function createQRCard(profileId, profile) {
        const grid = document.getElementById("qrGrid");

        const card = document.createElement("div");
        card.className = "qr-card";
        card.innerHTML = `
                <div class="profile-info">
                    <div class="profile-name">${profile.name}</div>
                    <div class="profile-title">${profile.title}</div>
                    <div class="profile-company">${profile.company}</div>
                    <div class="qr-code-id">QR Code: ${profileId}</div>
                </div>
                <div class="qr-placeholder" id="qr-${profileId}">
                    <span style="color: #ccc;">QR Code will appear here</span>
                </div>
                <button class="generate-btn" onclick="generateSingleQR('${profileId}')">Generate QR</button>
                <button class="download-btn" id="download-${profileId}" onclick="downloadQRPDF('${profileId}')">Download PDF</button>
            `;

        grid.appendChild(card);
      }

      function generateSingleQR(profileId) {
        const qrContainer = document.getElementById(`qr-${profileId}`);
        const downloadBtn = document.getElementById(`download-${profileId}`);

        // Clear previous content
        qrContainer.innerHTML = "";

        // Generate QR code
        const qr = new QRious({
          element: document.createElement("canvas"),
          value: profileId,
          size: 200,
          background: "white",
          foreground: "black",
        });

        qrContainer.appendChild(qr.canvas);
        downloadBtn.style.display = "inline-block";

        // Add success message
        setTimeout(() => {
          const success = document.createElement("div");
          success.style.cssText =
            "color: green; font-size: 0.9em; margin-top: 10px;";
          success.textContent = "âœ… QR Code Generated!";
          qrContainer.appendChild(success);
          setTimeout(() => success.remove(), 3000);
        }, 100);
      }

      function downloadQRPDF(profileId) {
        const canvas = document.querySelector(`#qr-${profileId} canvas`);
        if (!canvas) {
          alert("Please generate the QR code first!");
          return;
        }

        const profile = profiles[profileId];

        // Create PDF
        const { jsPDF } = window.jspdf;
        const pdf = new jsPDF({
          orientation: "portrait",
          unit: "mm",
          format: "a4",
        });

        // Add title
        pdf.setFontSize(20);
        pdf.setFont(undefined, "bold");
        pdf.text("NetworkVision QR Code", 105, 30, { align: "center" });

        // Add profile info
        pdf.setFontSize(16);
        pdf.setFont(undefined, "bold");
        pdf.text(profile.name, 105, 50, { align: "center" });

        pdf.setFontSize(12);
        pdf.setFont(undefined, "normal");
        pdf.text(profile.title, 105, 60, { align: "center" });
        pdf.text(profile.company, 105, 70, { align: "center" });

        // Add QR code
        const imgData = canvas.toDataURL("image/png");
        const qrSize = 60; // mm
        const x = (210 - qrSize) / 2; // Center on A4 width
        const y = 90;

        pdf.addImage(imgData, "PNG", x, y, qrSize, qrSize);

        // Add instructions
        pdf.setFontSize(10);
        pdf.text(
          "Scan this QR code with NetworkVision glasses",
          105,
          y + qrSize + 15,
          { align: "center" }
        );
        pdf.text(`Profile ID: ${profileId}`, 105, y + qrSize + 25, {
          align: "center",
        });

        // Add border
        pdf.setDrawColor(0, 0, 0);
        pdf.setLineWidth(0.5);
        pdf.rect(20, 20, 170, 250);

        // Download
        pdf.save(
          `qr-${profileId}-${profile.name.replace(/[^a-zA-Z0-9]/g, "_")}.pdf`
        );
      }

      function addCustomProfile() {
        const id = document.getElementById("customId").value.trim();
        const name = document.getElementById("customName").value.trim();
        const title = document.getElementById("customTitle").value.trim();
        const company = document.getElementById("customCompany").value.trim();

        if (!id || !name || !title || !company) {
          alert("Please fill in all fields");
          return;
        }

        if (profiles[id]) {
          alert("Profile ID already exists. Please choose a different ID.");
          return;
        }

        // Add to profiles
        profiles[id] = { name, title, company };

        // Create QR card
        createQRCard(id, profiles[id]);

        // Generate QR automatically
        setTimeout(() => generateSingleQR(id), 100);

        // Clear form
        document.getElementById("customId").value = "";
        document.getElementById("customName").value = "";
        document.getElementById("customTitle").value = "";
        document.getElementById("customCompany").value = "";

        // Success message
        alert(`âœ… Custom profile "${name}" added and QR code generated!`);
      }

      // Auto-generate all QR codes on load
      setTimeout(generateAllQRCodes, 500);
    </script>
  </body>
</html>
